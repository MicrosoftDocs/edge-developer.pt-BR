---
description: Saiba como gerenciar pastas de dados do usuário em aplicativos WebView2
title: Gerenciar a pasta de dados do usuário em aplicativos WebView2.
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 10/14/2020
ms.topic: conceptual
ms.prod: microsoft-edge
ms.technology: webview
keywords: IWebView2, IWebView2WebView, webview2, webview, aplicativos win32, win32, edge, ICoreWebView2, ICoreWebView2Host, controle do navegador, html de borda, pasta de dados do usuário
ms.openlocfilehash: ff11c4e83fa931a97ed1b5c8afa4a30b5c0b5d25
ms.sourcegitcommit: e3cd336c9448277e0dde3b9da1521b5cbc7c44d2
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/07/2021
ms.locfileid: "11536285"
---
# <a name="managing-the-user-data-folder"></a><span data-ttu-id="701f3-104">Gerenciando a pasta de dados do usuário</span><span class="sxs-lookup"><span data-stu-id="701f3-104">Managing the User Data Folder</span></span>  

<span data-ttu-id="701f3-105">Os aplicativos WebView2 interagem com pastas de dados do usuário para armazenar dados do navegador, como cookies, permissões e recursos armazenados em cache.</span><span class="sxs-lookup"><span data-stu-id="701f3-105">WebView2 applications interact with user data folders to store browser data, such as cookies, permissions, and cached resources.</span></span>  <span data-ttu-id="701f3-106">Cada instância de um controle WebView2 está associada a uma pasta de dados do usuário.</span><span class="sxs-lookup"><span data-stu-id="701f3-106">Each instance of a WebView2 control is associated with a user data folder.</span></span>  <span data-ttu-id="701f3-107">Cada pasta de dados do usuário é exclusiva de um usuário.</span><span class="sxs-lookup"><span data-stu-id="701f3-107">Each user data folder is unique to a user.</span></span>  

## <a name="best-practices"></a><span data-ttu-id="701f3-108">Práticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="701f3-108">Best Practices</span></span>  

<span data-ttu-id="701f3-109">As pastas de dados do usuário são criadas automaticamente pelo WebView2.</span><span class="sxs-lookup"><span data-stu-id="701f3-109">User data folders are created automatically by WebView2.</span></span>  <span data-ttu-id="701f3-110">Os desenvolvedores do WebView2 controlam o tempo de vida da pasta de dados do usuário.</span><span class="sxs-lookup"><span data-stu-id="701f3-110">WebView2 developers control the lifetime of the user data folder.</span></span>  <span data-ttu-id="701f3-111">Se o aplicativo rea usar dados do usuário de sessões de aplicativo, considere salvar as pastas de dados do usuário, caso contrário, você poderá excluí-las.</span><span class="sxs-lookup"><span data-stu-id="701f3-111">If your application re-uses user data from application sessions, consider saving the user data folders, otherwise you may delete them.</span></span>  <span data-ttu-id="701f3-112">Considere os seguintes cenários ao decidir como gerenciar suas pastas de dados do usuário:</span><span class="sxs-lookup"><span data-stu-id="701f3-112">Consider the following scenarios when deciding how to manage your user data folders:</span></span>  

*   <span data-ttu-id="701f3-113">Se o mesmo usuário usar seu aplicativo repetidamente e o conteúdo da Web do aplicativo se basear nos dados do usuário, salve a pasta de dados do usuário.</span><span class="sxs-lookup"><span data-stu-id="701f3-113">If the same user uses your application repeatedly, and the web content of the application relies on the user's data, save the user data folder.</span></span>  <span data-ttu-id="701f3-114">Se vários usuários usarem seu aplicativo repetidamente, crie uma nova pasta de dados do usuário para cada novo usuário e salve a pasta de dados do usuário de cada usuário.</span><span class="sxs-lookup"><span data-stu-id="701f3-114">If multiple users use your application repeatedly, create a new user data folder for each new user, and save the user data folder of each user.</span></span>
*   <span data-ttu-id="701f3-115">Se o aplicativo não tiver usuários repetidos, crie uma nova pasta de dados do usuário para cada usuário e exclua a pasta de dados do usuário anterior.</span><span class="sxs-lookup"><span data-stu-id="701f3-115">If your application does not have repeat users, create a new user data folder for each user, and delete the previous user data folder.</span></span>  

## <a name="create-user-data-folders"></a><span data-ttu-id="701f3-116">Criar pastas de dados do usuário</span><span class="sxs-lookup"><span data-stu-id="701f3-116">Create user data folders</span></span>  

<span data-ttu-id="701f3-117">Para especificar o local da pasta de dados do usuário, inclua o parâmetro ao chamar `userDataFolder` [ICoreWebView2Environment](/microsoft-edge/webview2/reference/win32/icorewebview2environment) \(Win32\) ou [CoreWebView2Environment](/dotnet/api/microsoft.web.webview2.core.corewebview2environment) \(.NET\).</span><span class="sxs-lookup"><span data-stu-id="701f3-117">To specify the location of the user data folder, include the `userDataFolder` parameter when calling [ICoreWebView2Environment](/microsoft-edge/webview2/reference/win32/icorewebview2environment) \(Win32\) or [CoreWebView2Environment](/dotnet/api/microsoft.web.webview2.core.corewebview2environment) \(.NET\).</span></span>  <span data-ttu-id="701f3-118">Após a criação, os dados do navegador do controle WebView2 são armazenados em uma subpasta de `userDataFolder` .</span><span class="sxs-lookup"><span data-stu-id="701f3-118">After creation, browser data from your WebView2 control is stored in a subfolder of `userDataFolder`.</span></span>  <span data-ttu-id="701f3-119">Quando não é especificado, o WebView2 cria pastas de dados do usuário em locais padrão `userDataFolder` da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="701f3-119">When `userDataFolder` is not specified, WebView2 creates user data folders at default locations as follows:</span></span>  

*   <span data-ttu-id="701f3-120">Para aplicativos Windows Store empacotados, a pasta de usuário padrão é a `ApplicationData\LocalFolder` subpasta na pasta do pacote.</span><span class="sxs-lookup"><span data-stu-id="701f3-120">For packaged Windows Store apps, the default user folder is the `ApplicationData\LocalFolder` subfolder in the package's  folder.</span></span>  
*   <span data-ttu-id="701f3-121">Para aplicativos de área de trabalho existentes, a pasta de dados do usuário padrão é o caminho exe do seu aplicativo + `.WebView2` .</span><span class="sxs-lookup"><span data-stu-id="701f3-121">For existing desktop apps, the default user data folder is the exe path of your application + `.WebView2`.</span></span>  <span data-ttu-id="701f3-122">Em vez de usar o padrão, recomendamos que você especifique uma pasta de dados do usuário e que você a crie na mesma pasta onde todos os outros dados do aplicativo são armazenados.</span><span class="sxs-lookup"><span data-stu-id="701f3-122">Instead of using the default, we recommend that you specify a user data folder, and that you create it in the same folder where all other app data is stored.</span></span>  

## <a name="delete-user-data-folders"></a><span data-ttu-id="701f3-123">Excluir pastas de dados do usuário</span><span class="sxs-lookup"><span data-stu-id="701f3-123">Delete user data folders</span></span>  

<span data-ttu-id="701f3-124">Seu aplicativo pode precisar excluir pastas de dados do usuário:</span><span class="sxs-lookup"><span data-stu-id="701f3-124">Your application may need to delete user data folders:</span></span>  

*   <span data-ttu-id="701f3-125">Ao desinstalar seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="701f3-125">When uninstalling your app.</span></span>  <span data-ttu-id="701f3-126">Se você estiver desinstalando aplicativos Windows Da Loja, Windows excluir pastas de dados do usuário automaticamente.</span><span class="sxs-lookup"><span data-stu-id="701f3-126">If you are uninstalling packaged Windows Store apps, Windows deletes user data folders automatically.</span></span>  
*   <span data-ttu-id="701f3-127">Para limpar todo o histórico de dados de navegação.</span><span class="sxs-lookup"><span data-stu-id="701f3-127">To clean up all browsing data history.</span></span>  
*   <span data-ttu-id="701f3-128">Para recuperar da corrupção de dados.</span><span class="sxs-lookup"><span data-stu-id="701f3-128">To recover from data corruption.</span></span>  
*   <span data-ttu-id="701f3-129">Para remover dados da sessão anterior.</span><span class="sxs-lookup"><span data-stu-id="701f3-129">To remove previous session data.</span></span>  

> [!NOTE]
> <span data-ttu-id="701f3-130">Os arquivos em pastas de dados do usuário ainda podem estar em uso depois que o aplicativo WebView2 for fechado.</span><span class="sxs-lookup"><span data-stu-id="701f3-130">Files in user data folders may still be in use after the WebView2 application is closed.</span></span>  <span data-ttu-id="701f3-131">Nessa situação, aguarde até que o processo do navegador e todos os processos filho saiam antes de excluir a pasta.</span><span class="sxs-lookup"><span data-stu-id="701f3-131">In this situation, wait for the browser process and all child processes to exit before deleting the folder.</span></span>  <span data-ttu-id="701f3-132">Você pode recuperar a ID do processo do navegador usando a `BrowserProcessId` propriedade do WebView2.</span><span class="sxs-lookup"><span data-stu-id="701f3-132">You may retrieve the process id of the browser process using the `BrowserProcessId` property of the WebView2.</span></span>  

## <a name="share-user-data-folders"></a><span data-ttu-id="701f3-133">Compartilhar pastas de dados do usuário</span><span class="sxs-lookup"><span data-stu-id="701f3-133">Share user data folders</span></span>  

<span data-ttu-id="701f3-134">Os controles WebView2 podem compartilhar as mesmas pastas de dados do usuário para:</span><span class="sxs-lookup"><span data-stu-id="701f3-134">WebView2 controls may share the same user data folders to:</span></span>  

*   <span data-ttu-id="701f3-135">[Otimize os recursos do](../concepts/process-model.md) sistema executando em um processo de navegador.</span><span class="sxs-lookup"><span data-stu-id="701f3-135">[Optimize system resources](../concepts/process-model.md) by running in one browser process.</span></span>  
*   <span data-ttu-id="701f3-136">Compartilhe o histórico do navegador e os recursos armazenados em cache.</span><span class="sxs-lookup"><span data-stu-id="701f3-136">Share browser history and cached resources.</span></span>  

<span data-ttu-id="701f3-137">Considere o seguinte ao compartilhar pastas de dados do usuário:</span><span class="sxs-lookup"><span data-stu-id="701f3-137">Consider the following when sharing user data folders:</span></span>  

1.  <span data-ttu-id="701f3-138">Ao criar controles WebView2 para atualizar versões do navegador usando eventos add_NewBrowserVersionAvailable \(Win32\) ou [NewBrowserVersionAvailable](/dotnet/api/microsoft.web.webview2.core.corewebview2environment.newbrowserversionavailable) \(.NET\), verifique se os processos do navegador saem e fecham controles WebView2 que compartilham a mesma pasta de dados do usuário. [](/microsoft-edge/webview2/reference/win32/icorewebview2environment#add_newbrowserversionavailable)</span><span class="sxs-lookup"><span data-stu-id="701f3-138">When re-creating WebView2 controls to update browser versions using [add_NewBrowserVersionAvailable](/microsoft-edge/webview2/reference/win32/icorewebview2environment#add_newbrowserversionavailable) \(Win32\) or [NewBrowserVersionAvailable](/dotnet/api/microsoft.web.webview2.core.corewebview2environment.newbrowserversionavailable) \(.NET\) events, ensure browser processes exit and close WebView2 controls that share the same user data folder.</span></span>  <span data-ttu-id="701f3-139">Para recuperar a ID do processo do navegador, use a `BrowserProcessId` propriedade do controle WebView2.</span><span class="sxs-lookup"><span data-stu-id="701f3-139">To retrieve the process id of the browser process, use the `BrowserProcessId` property of the WebView2 control.</span></span>  

2.  <span data-ttu-id="701f3-140">Os controles WebView2 que compartilham a mesma pasta de dados do usuário devem usar as mesmas opções para [ICoreWebView2Environment](/microsoft-edge/webview2/reference/win32/icorewebview2environment) \(Win32\) ou [CoreWebView2Environment](/dotnet/api/microsoft.web.webview2.core.corewebview2environment) \(.NET\).</span><span class="sxs-lookup"><span data-stu-id="701f3-140">WebView2 controls that share the same user data folder must use the same options for [ICoreWebView2Environment](/microsoft-edge/webview2/reference/win32/icorewebview2environment) \(Win32\) or [CoreWebView2Environment](/dotnet/api/microsoft.web.webview2.core.corewebview2environment) \(.NET\).</span></span>  <span data-ttu-id="701f3-141">Caso não seja, a criação de WebView2 falhará com `HRESULT_FROM_WIN32(ERROR_INVALID_STATE)` .</span><span class="sxs-lookup"><span data-stu-id="701f3-141">If not, the WebView2 creation will fail with `HRESULT_FROM_WIN32(ERROR_INVALID_STATE)`.</span></span>  

<span data-ttu-id="701f3-142">Para isolar diferentes partes do seu aplicativo ou quando o compartilhamento de dados entre controles WebView2 não for necessário, você pode optar por usar pastas de dados de usuário diferentes.</span><span class="sxs-lookup"><span data-stu-id="701f3-142">To isolate different parts of your application or when sharing data between WebView2 controls is not needed, you may choose to use different user data folders.</span></span>  <span data-ttu-id="701f3-143">Por exemplo, um aplicativo pode consistir em dois controles WebView2, um para exibir um anúncio e outro para exibir conteúdo do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="701f3-143">For example, an application may consist of two WebView2 controls, one for displaying an advertisement and the other for displaying application content.</span></span>  <span data-ttu-id="701f3-144">Nesse cenário, os desenvolvedores podem optar por usar pastas de dados de usuário diferentes para cada controle WebView2.</span><span class="sxs-lookup"><span data-stu-id="701f3-144">In this scenario, developers may opt to use different user data folders for each WebView2 control.</span></span>  

> [!NOTE]
> <span data-ttu-id="701f3-145">Cada processo do navegador WebView2 consome memória e espaço em disco adicionais.</span><span class="sxs-lookup"><span data-stu-id="701f3-145">Each WebView2 browser process consumes additional memory and disk space.</span></span>  <span data-ttu-id="701f3-146">Portanto, recomendamos não executar WebView2s com muitas pastas de dados de usuário diferentes ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="701f3-146">Therefore, we recommend not running WebView2s with too many different user data folders at the same time.</span></span>  
