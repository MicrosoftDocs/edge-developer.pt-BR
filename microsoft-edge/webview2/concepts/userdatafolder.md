---
description: Saiba como gerenciar pastas de dados do usuário em aplicativos do WebView2
title: Gerenciar a pasta dados do usuário em aplicativos do WebView2.
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 07/14/2020
ms.topic: conceptual
ms.prod: microsoft-edge
ms.technology: webview
keywords: IWebView2, IWebView2WebView, webview2, WebView, aplicativos Win32, Win32, Edge, ICoreWebView2, ICoreWebView2Host, controle do navegador, HTML Edge, pasta dados do usuário
ms.openlocfilehash: 870361e5f3edaea776538216c05e4114dc614342
ms.sourcegitcommit: f6764f57aed9ab7229e4eb6cc8851d0cea667403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/15/2020
ms.locfileid: "10879148"
---
# <span data-ttu-id="da588-104">Gerenciando a pasta dados do usuário</span><span class="sxs-lookup"><span data-stu-id="da588-104">Managing the User Data Folder</span></span>

<span data-ttu-id="da588-105">Os aplicativos do WebView2 interagem com pastas de dados do usuário para armazenar dados do navegador, como cookies, permissões e recursos armazenados em cache.</span><span class="sxs-lookup"><span data-stu-id="da588-105">WebView2 applications interact with user data folders to store browser data, such as cookies, permissions, and cached resources.</span></span> <span data-ttu-id="da588-106">Cada instância de um controle WebView2 é associada a uma pasta de dados do usuário.</span><span class="sxs-lookup"><span data-stu-id="da588-106">Each instance of a WebView2 control is associated with a user data folder.</span></span> <span data-ttu-id="da588-107">Cada pasta de dados do usuário é exclusiva para um usuário.</span><span class="sxs-lookup"><span data-stu-id="da588-107">Each user data folder is unique to a user.</span></span>

## <span data-ttu-id="da588-108">Práticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="da588-108">Best Practices</span></span>

<span data-ttu-id="da588-109">As pastas de dados do usuário são criadas automaticamente pelo WebView2.</span><span class="sxs-lookup"><span data-stu-id="da588-109">User data folders are created automatically by WebView2.</span></span> <span data-ttu-id="da588-110">Os desenvolvedores do WebView2 controlam o tempo de vida da pasta de dados do usuário.</span><span class="sxs-lookup"><span data-stu-id="da588-110">WebView2 developers control the lifetime of the user data folder.</span></span> <span data-ttu-id="da588-111">Se o aplicativo reutilizar dados do usuário de sessões do aplicativo, considere salvar as pastas de dados do usuário, caso contrário, você poderá excluí-las.</span><span class="sxs-lookup"><span data-stu-id="da588-111">If your application re-uses user data from application sessions, consider saving the user data folders, otherwise you may delete them.</span></span> <span data-ttu-id="da588-112">Considere os seguintes cenários ao decidir como gerenciar suas pastas de dados de usuário:</span><span class="sxs-lookup"><span data-stu-id="da588-112">Consider the following scenarios when deciding how to manage your user data folders:</span></span>

*   <span data-ttu-id="da588-113">Se o mesmo usuário usar seu aplicativo repetidamente, e o conteúdo da Web do aplicativo depender dos dados do usuário, salve a pasta dados do usuário.</span><span class="sxs-lookup"><span data-stu-id="da588-113">If the same user uses your application repeatedly, and the web content of the application relies on the user’s data, save the user data folder.</span></span> <span data-ttu-id="da588-114">Se vários usuários usarem seu aplicativo repetidamente, crie uma nova pasta de dados do usuário para cada novo usuário e salve a pasta dados do usuário de cada usuário.</span><span class="sxs-lookup"><span data-stu-id="da588-114">If multiple users use your application repeatedly, create a new user data folder for each new user, and save the user data folder of each user.</span></span>
*   <span data-ttu-id="da588-115">Se seu aplicativo não tiver usuários repetidos, crie uma nova pasta de dados de usuário para cada usuário e exclua a pasta de dados do usuário anterior.</span><span class="sxs-lookup"><span data-stu-id="da588-115">If your application does not have repeat users, create a new user data folder for each user, and delete the previous user data folder.</span></span>

## <span data-ttu-id="da588-116">Criar pastas de dados do usuário</span><span class="sxs-lookup"><span data-stu-id="da588-116">Create user data folders</span></span>

<span data-ttu-id="da588-117">Para especificar o local da pasta de dados do usuário, inclua o `userDataFolder` parâmetro ao chamar [ICoreWebView2Environment](../reference/win32/0-9-538/icorewebview2environment.md) (Win32) ou [CoreWebView2Environment](../reference/dotnet/0-9-538/microsoft-web-webview2-core-corewebview2environment.md) (.net).</span><span class="sxs-lookup"><span data-stu-id="da588-117">To specify the location of the user data folder, include the `userDataFolder` parameter when calling [ICoreWebView2Environment](../reference/win32/0-9-538/icorewebview2environment.md) (Win32) or [CoreWebView2Environment](../reference/dotnet/0-9-538/microsoft-web-webview2-core-corewebview2environment.md) (.NET).</span></span> <span data-ttu-id="da588-118">Após a criação, os dados do navegador do seu controle WebView2 são armazenados em uma subpasta de `userDataFolder` .</span><span class="sxs-lookup"><span data-stu-id="da588-118">After creation, browser data from your WebView2 control is stored in a subfolder of `userDataFolder`.</span></span> <span data-ttu-id="da588-119">Quando `userDataFolder` não é especificado, o WebView2 cria pastas de dados do usuário em locais padrão da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="da588-119">When `userDataFolder` is not specified, WebView2 creates user data folders at default locations as follows:</span></span>

* <span data-ttu-id="da588-120">Para aplicativos da Windows Store em pacote, a pasta usuário padrão é a subpasta `ApplicationData\LocalFolder` na pasta do pacote.</span><span class="sxs-lookup"><span data-stu-id="da588-120">For packaged Windows Store apps, the default user folder is the `ApplicationData\LocalFolder` subfolder in the package’s  folder.</span></span>
* <span data-ttu-id="da588-121">Para aplicativos da área de trabalho existentes, a pasta dados do usuário padrão é o caminho exe do seu aplicativo + `.WebView2` .</span><span class="sxs-lookup"><span data-stu-id="da588-121">For existing desktop apps, the default user data folder is the exe path of your application + `.WebView2`.</span></span> <span data-ttu-id="da588-122">Em vez de usar o padrão, recomendamos que você especifique uma pasta de dados do usuário e a crie na mesma pasta em que todos os outros dados do aplicativo são armazenados.</span><span class="sxs-lookup"><span data-stu-id="da588-122">Instead of using the default, we recommend that you specify a user data folder, and that you create it in the same folder where all other app data is stored.</span></span>

## <span data-ttu-id="da588-123">Excluir pastas de dados do usuário</span><span class="sxs-lookup"><span data-stu-id="da588-123">Delete user data folders</span></span>

<span data-ttu-id="da588-124">Seu aplicativo pode precisar excluir pastas de dados do usuário:</span><span class="sxs-lookup"><span data-stu-id="da588-124">Your application may need to delete user data folders:</span></span>

* <span data-ttu-id="da588-125">Durante a desinstalação do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="da588-125">When uninstalling your app.</span></span> <span data-ttu-id="da588-126">Se você estiver desinstalando aplicativos empacotados da Windows Store, o Windows excluirá pastas de dados do usuário automaticamente.</span><span class="sxs-lookup"><span data-stu-id="da588-126">If you are uninstalling packaged Windows Store apps, Windows deletes user data folders automatically.</span></span> 
* <span data-ttu-id="da588-127">Para limpar todo o histórico de dados de navegação.</span><span class="sxs-lookup"><span data-stu-id="da588-127">To clean up all browsing data history.</span></span>
* <span data-ttu-id="da588-128">Para recuperar-se da corrupção de dados.</span><span class="sxs-lookup"><span data-stu-id="da588-128">To recover from data corruption.</span></span>
* <span data-ttu-id="da588-129">Para remover dados de sessão anteriores.</span><span class="sxs-lookup"><span data-stu-id="da588-129">To remove previous session data.</span></span> 


> [!NOTE]
> <span data-ttu-id="da588-130">Os arquivos nas pastas de dados do usuário ainda podem estar em uso após o aplicativo do WebView2 ser fechado.</span><span class="sxs-lookup"><span data-stu-id="da588-130">Files in user data folders may still be in use after the WebView2 application is closed.</span></span> <span data-ttu-id="da588-131">Nessa situação, aguarde o processo do navegador e todos os processos filho serem encerrados antes de excluir a pasta.</span><span class="sxs-lookup"><span data-stu-id="da588-131">In this situation, wait for the browser process and all child processes to exit before deleting the folder.</span></span> <span data-ttu-id="da588-132">Você pode recuperar a ID do processo do navegador usando a `BrowserProcessId` Propriedade do WebView2.</span><span class="sxs-lookup"><span data-stu-id="da588-132">You may retrieve the process id of the browser process using the `BrowserProcessId` property of the WebView2.</span></span>

## <span data-ttu-id="da588-133">Compartilhar pastas de dados do usuário</span><span class="sxs-lookup"><span data-stu-id="da588-133">Share user data folders</span></span>

<span data-ttu-id="da588-134">Os controles WebView2 podem compartilhar as mesmas pastas de dados de usuário para:</span><span class="sxs-lookup"><span data-stu-id="da588-134">WebView2 controls may share the same user data folders to:</span></span>

* <span data-ttu-id="da588-135">[Otimize os recursos do sistema](../reference/win32/0-9-538/icorewebview2.md#process-model) executando em um processo do navegador.</span><span class="sxs-lookup"><span data-stu-id="da588-135">[Optimize system resources](../reference/win32/0-9-538/icorewebview2.md#process-model) by running in one browser process.</span></span>
* <span data-ttu-id="da588-136">Compartilhe o histórico do navegador e recursos armazenados em cache.</span><span class="sxs-lookup"><span data-stu-id="da588-136">Share browser history and cached resources.</span></span> 

<span data-ttu-id="da588-137">Considere o seguinte ao compartilhar pastas de dados do usuário:</span><span class="sxs-lookup"><span data-stu-id="da588-137">Consider the following when sharing user data folders:</span></span> 

1. <span data-ttu-id="da588-138">Ao recriar controles WebView2 para atualizar versões do navegador usando eventos do [add_NewBrowserVersionAvailable](../reference/win32/0-9-538/icorewebview2environment.md#add_newbrowserversionavailable) (Win32) ou do [NewBrowserVersionAvailable](../reference/dotnet/0-9-538/microsoft-web-webview2-core-corewebview2environment.md#newbrowserversionavailable) (.net), garanta que o navegador processe e feche os controles de WebView2 que compartilham a mesma pasta de dados do usuário.</span><span class="sxs-lookup"><span data-stu-id="da588-138">When re-creating WebView2 controls to update browser versions using [add_NewBrowserVersionAvailable](../reference/win32/0-9-538/icorewebview2environment.md#add_newbrowserversionavailable) (Win32) or [NewBrowserVersionAvailable](../reference/dotnet/0-9-538/microsoft-web-webview2-core-corewebview2environment.md#newbrowserversionavailable) (.NET) events, ensure browser processes exit and close WebView2 controls that share the same user data folder.</span></span> <span data-ttu-id="da588-139">Para recuperar a ID do processo do navegador, use a `BrowserProcessId` Propriedade do controle WebView2.</span><span class="sxs-lookup"><span data-stu-id="da588-139">To retrieve the process id of the browser process, use the `BrowserProcessId` property of the WebView2 control.</span></span>

2. <span data-ttu-id="da588-140">Os controles WebView2 que compartilham a mesma pasta de dados do usuário devem usar as mesmas opções para [ICoreWebView2Environment](../reference/win32/0-9-538/icorewebview2environment.md) (Win32) ou [CoreWebView2Environment](../reference/dotnet/0-9-538/microsoft-web-webview2-core-corewebview2environment.md) (.net).</span><span class="sxs-lookup"><span data-stu-id="da588-140">WebView2 controls that share the same user data folder must use the same options for [ICoreWebView2Environment](../reference/win32/0-9-538/icorewebview2environment.md) (Win32) or [CoreWebView2Environment](../reference/dotnet/0-9-538/microsoft-web-webview2-core-corewebview2environment.md) (.NET).</span></span> <span data-ttu-id="da588-141">Caso contrário, haverá falha na criação do WebView2 `HRESULT_FROM_WIN32(ERROR_INVALID_STATE)` .</span><span class="sxs-lookup"><span data-stu-id="da588-141">If not, the WebView2 creation will fail with `HRESULT_FROM_WIN32(ERROR_INVALID_STATE)`.</span></span> 

<span data-ttu-id="da588-142">Para isolar partes diferentes do seu aplicativo ou ao compartilhar dados entre os controles do WebView2 não forem necessários, você pode optar por usar pastas de dados de usuário diferentes.</span><span class="sxs-lookup"><span data-stu-id="da588-142">To isolate different parts of your application or when sharing data between WebView2 controls is not needed, you may choose to use different user data folders.</span></span> <span data-ttu-id="da588-143">Por exemplo, um aplicativo pode consistir em dois controles WebView2, um para exibir um anúncio e o outro para exibir o conteúdo do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="da588-143">For example, an application may consist of two WebView2 controls, one for displaying an advertisement and the other for displaying application content.</span></span> <span data-ttu-id="da588-144">Nesse cenário, os desenvolvedores podem optar por usar pastas de dados de usuário diferentes para cada controle WebView2.</span><span class="sxs-lookup"><span data-stu-id="da588-144">In this scenario, developers may opt to use different user data folders for each WebView2 control.</span></span> 

> [!NOTE]
> <span data-ttu-id="da588-145">Cada processo de navegador WebView2 consome memória adicional e espaço em disco.</span><span class="sxs-lookup"><span data-stu-id="da588-145">Each WebView2 browser process consumes additional memory and disk space.</span></span> <span data-ttu-id="da588-146">Portanto, recomendamos não executar o WebView2s com muitas pastas de dados de usuário diferentes ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="da588-146">Therefore, we recommend not running WebView2s with too many different user data folders at the same time.</span></span> 
